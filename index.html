<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-33922028-2"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'UA-33922028-2');
            
            /**
            * Function that registers a click on an outbound link in Analytics.
            * This function takes a valid URL string as an argument, and uses that URL string
            * as the event label. Setting the transport method to 'beacon' lets the hit be sent
            * using 'navigator.sendBeacon' in browser that support it.
            */
            var getOutboundLink = function(url) {
              gtag('event', 'click', {
                'event_category': 'outbound',
                'event_label': url,
                'transport_type': 'beacon',
                'event_callback': function(){document.location = url;}
              });
            }
        </script>

        <!-- Google Tag Manager -->
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-MMJC2VZ');</script>
        <!-- End Google Tag Manager -->

        <title>RATAN - Drain</title>
        <style type="text/css">
            body, html {
                margin: 0;
                padding: 0;
                background-color: #14191b;
                color: #FFFFFF;
                font-family: 'Karla', sans-serif;
                font-size: 1.1em;
                
                background-color: #1a1127;
                background-image: url('drain_bg_2.jpg');
                background-size: cover;
                background-repeat: repeat;
                background-position: top;
                background-attachment: fixed;
            }

            #content {
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                padding: 5px;
            }

            #inner-content {
                width: 80%;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                max-width: 520px;
                min-width: 200px;
                /*background-color: rgba(0,0,0,0.2);*/
                /*filter: drop-shadow(0 0 0.75rem rgba(70,30,170,0.3));*/
                filter: drop-shadow(0 0 0.75rem rgba(0,0,0,0.7));
                padding-left: 10px;
                padding-right: 10px;
                /*grid-template-columns: repeat(auto-fit, minmax(520px, 1fr));*/
                /*grid-auto-flow: dense;*/
            }

            .album-container {
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                border-radius: 10px;
                overflow: hidden;
                position: relative;
            }

            .album-name {
                margin-bottom: 5px;
                font-weight: bold;
            }

            .album-art {
                max-width:100%;
                max-height:100%;
                height: auto;
                width: auto;
                /*margin-top: 20px;*/
            }

            audio {
                filter: grayscale(1) contrast(70%) invert(100%) sepia(5%); 
                width: 100%;
                height: 40px;
                background-color: #FFFFFF;
            }

            audio::-webkit-media-controls-panel{
                background-color: #FFFFFF;
            }

            #controls {
                display: flex;
                flex-direction: column
                width: 100%;
                height: 100%;
                justify-content: center;
            }

            #progress-bar { 
               /*border-top:1px solid rgba(255,255,255,0.3); */
               color: #fff; 
               width: 100%;
               height:17%;
               position: absolute;
               bottom: 0;
               background-color:rgba(0,0,0,0.3);
               cursor: pointer;
               filter: drop-shadow(0 0 0.5rem rgba(0,0,0,0.5));
            }

            #progress-bar:hover {
               background-color:rgba(30,30,30,0.3);
               
            }

            #progress-bar:hover > #progress {
               background-color:rgba(255,255,255,1.0);
            }

            #progress {
               background-color:rgba(255,255,255,0.8);
               /*border-right: 1px solid rgba(255,255,255,0.5);*/
               height:100%;
               display:block;
               width: 0%;
               pointer-events: none;
            }

            #playpause {
                /*background-image: url('play_button.svg');*/
                opacity: 0.8;
                background: none;
                width: 100%;
                color: inherit;
                border: none;
                padding: 0;
                font: inherit;
                cursor: pointer;
                outline: inherit;
            }

            #playpause-image {
                /*background-image: url('play_button.svg');*/
                
                filter: invert(1) drop-shadow(0 0 0.5rem rgba(0,0,0,0.5));
                background: none;
                width: 20%;
                color: inherit;
                border: none;
                padding: 0;
                font: inherit;
                cursor: pointer;
                outline: inherit;
            }

            #playpause:hover {
                opacity: 1.0;
            }

            .preview {
                height: 100%;
                width: 100%;
                /*margin-top: 6px;*/
                /*margin-bottom: -10px;*/
                /*margin-bottom: 5px;*/
                position: absolute;
                bottom: 0;
                /*font-weight: bold;*/
            }

            .preview-text {
                position: absolute;
                bottom: 17%;
                text-align: center;
                /*color: #CCCCCC;*/
                color: rgba(255,255,255,1.0);
                opacity: 0.3;
                font-size: 0.7em;
                user-select: none;
                padding-bottom: 3px;
                pointer-events: none;
                text-shadow: rgba(0,0,0,1.0) 0 0 3px;
            }

            .social-buttons {
                /*background-color: #24292b;*/
                background-color: rgba(30,30,30,0.7);
                margin-top: 5px;
                padding: 10px 0 10px 0;
                width: 100%;
                text-align: center;
                height: 30px;
                display: flex;
                justify-content: center;
                align-items: center;
                flex-direction: row;
                margin-bottom: 5px;
            }

            .social-button {
                /*background-color: #EAEAE0;*/
                padding: 10px 0 10px 0;
                width: 100%;
                text-align: center;
                height: 35px;
                display: flex;
                justify-content: center;
                align-items: center;
                flex-direction: row;
            }

            .social-button:hover {
                background-color: rgba(50, 50, 50, 1.0);
            }

            .social-button img {
                height: 100%;
                max-width: 160px;
                max-height: 40px;
            }

            #buttons {
                margin-top: 6px;
                width: 100%;
                display: grid;
                justify-content: center;
                align-items: center;
                /*max-width: 320px;*/
                /*min-width: 200px;*/
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                grid-auto-flow: dense;
                /*background: #999990;*/
                grid-gap: 2px;
                background-color:  rgba(0,0, 0,0.5);
            }

            .button {
                /*background-color: #FAFAF0;*/
                background-color: rgba(80,80,80,.3);
                /*border-top: 2px #000000 solid ;*/
                /*margin-top: 6px;*/
                /*border-bottom: 2px #999990 solid;*/
                padding: 8px 0 8px 0;
                width: 100%;
                text-align: center;
                height: 50px;
                display: flex;
                justify-content: center;
                align-items: center;
                flex-direction: row;

            }

            /*.button:last-of-type {
                border-bottom: none;
            }*/

            .button:hover {
                background-color: #EAEAE0;
                background-color: rgba(50, 50, 50, 1.0);
            }

            .button img {
                height: 100%;
                /*width: 120px;*/
                max-width: 140px;
                max-height: 50px;
            }

            a {
                color: #000000;
                text-decoration: none;
            }

            a:hover {
                color: #555555;
            }

            .blurb {
                width: 100%;
                text-align: center;
                color: #FFFFFF;
                font-size: 4.5vw;
                text-shadow: #000 0 0 3px;
                margin-top: 10px;
                margin-bottom: 10px;
                /*padding: 15px;*/
                padding-top: 15px;
                padding-bottom: 15px;
                background:
                linear-gradient(
                  rgba(0, 0, 0, 0.5), 
                  rgba(0, 0, 0, 0.5)
                ),
                url('drain_blurb.jpg');
                background-size: cover;
                background-repeat: no-repeat;
                background-position: center center;
                user-select: none;
                border-radius: 10px;
            }

            @media (min-width: 43em) {
              .blurb {
                font-size: 31px;
              }
            }

            .header {
                width: 100%;
                text-align: center;
                color: #FFFFFF;
                /*text-shadow: #000 0 0 5px;*/
                text-shadow: rgba(255,255,100,0.4) 0 0 7px;
                margin-bottom: 10px;
                /*padding: 15px;*/
                padding-top: 5px;
                padding-bottom: 5px;
/*                background:
                linear-gradient(
                  rgba(0, 0, 0, 0.3), 
                  rgba(0, 0, 0, 0.3)
                ),
                url('drain_header.jpg');*/
                background-size: cover;
                background-repeat: no-repeat;
                background-position: center center;
                user-select: none;
                border-radius: 10px;
            }

             .header h1 {
                margin: 0px;
                padding: 0px;
                letter-spacing: .5em;
                text-align: center;
                padding-left: .5em;
                user-select: none;
                font-size: 12.5vw;
            }

            @media (min-width: 43em) {
              .header h1 {
                font-size: 86px;
              }
            }
        </style>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
        <meta name="description" content="49 minutes of vibrating instrumental prog metal inspired by Tool. RATAN - Drain out now."/>
        <meta name="og:image" content="drain.jpg" />
        <meta name="og:audio" content="https://raw.githubusercontent.com/ratan-band/ratan-band.github.io/master/snippet.m4a" />
        <link rel="manifest" href="/site.webmanifest">
        <!-- <link href="https://fonts.googleapis.com/css2?family=Karla&display=swap" rel="stylesheet"> -->
        <link href="https://fonts.googleapis.com/css2?family=Karla:wght@400;700&display=swap" rel="stylesheet">

        <script>
            var audio;

            function togglePlayPause() {
               if (audio.paused || audio.ended) {
                  updateButton(true);
                  audio.play();
               } else {
                  updateButton(false);
                  audio.pause();
               }
            }

            function updateProgress() {
               var progress = document.getElementById("progress");
               var value = 0;
               if (audio.currentTime > 0) {
                  value = (100 / audio.duration) * audio.currentTime;
               }
               progress.style.width = value + "%";
            }

            function clickEvent(e) {
              var rect = e.target.getBoundingClientRect();
              var val = new Object();

              val.x = (e.clientX - rect.left) / rect.width;
              val.y = (e.clientY - rect.top) / rect.height;

              return val;
            }

            function setProgress(position) {
                audio.currentTime = position * audio.duration;
            }

            function updateButton(playing) {
                var playpause = document.getElementById("playpause");
                var playpauseImage = document.getElementById("playpause-image");
                if (playing) {
                    playpause.title = "Pause";
                    playpauseImage.src = "pause_button.svg";
                } else {
                    playpauseImage.src = "play_button.svg";
                    playpause.title = "Play";
                }
            }

            window.onload = function(){
                audio = document.getElementById("audio snippet");
                // Turn off the default controls
                audio.controls = false;

                audio.addEventListener("timeupdate", updateProgress, false);

                var progressBar = document.getElementById("progress-bar");
                progressBar.addEventListener('click', event => {
                    var clickPosition = clickEvent(event);
                    setProgress(clickPosition.x);
               });

                // audio.addEventListener('play', () => {
                //   audio._updateInterval = setInterval(() => {
                //     updateProgress();
                //   }, 25);
                // }, true);

                // audio.addEventListener('pause', () => clearInterval(audio._updateInterval), true);
                audio.addEventListener('ended', () => updateButton(false), true);
            }


        </script>
        
        <!-- Facebook Pixel Code -->
        <script>
        !function(f,b,e,v,n,t,s)
        {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
        n.callMethod.apply(n,arguments):n.queue.push(arguments)};
        if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
        n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t,s)}(window, document,'script',
        'https://connect.facebook.net/en_US/fbevents.js');
        fbq('init', '580541969279482');
        fbq('track', 'PageView');
        </script>
        <noscript><img height="1" width="1" style="display:none"
        src="https://www.facebook.com/tr?id=580541969279482&ev=PageView&noscript=1"
        /></noscript>
        <!-- End Facebook Pixel Code -->
    </head>
    <body>
        <!-- Google Tag Manager (noscript) -->
        <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MMJC2VZ"
        height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
        <!-- End Google Tag Manager (noscript) -->
        <div id="content">
            <div id="inner-content">
                <span class="header">
                    <h1>RATAN</h1>
                </span>
                <div class="album-container">
                    <!-- <span class="album-name">RATAN - Drain</span> -->
                    <img class="album-art" src="drain.jpg" title="RATAN - Drain (2020)"/>
                    <div class="preview">
                        <audio id="audio snippet" nocontrols controlsList="nodownload" preload="auto">
                            <source src="https://raw.githubusercontent.com/ratan-band/ratan-band.github.io/master/snippet.m4a"/>
                        </audio>
                        <div id="controls">
                            <div class="preview-text">(album preview)</div>
                            <button id="playpause" title="play" onclick="togglePlayPause()"><img id="playpause-image" src="play_button.svg"/></button>
                            <div id="progress-bar"><div id="progress"></div></div>
                        </div>
                    </div>
                </div>
                <span class="blurb">
                    49 minutes of vibrating
                    <br/>
                    instrumental prog metal
                    <br/>
                    inspired by Tool
                </span>
                <div class="social-buttons">
                    <a class="social-button"
                       href="https://www.facebook.com/ratan.band"
                       onclick="getOutboundLink('https://www.facebook.com/ratan.band'); fbq('track', 'ViewContent', {content_name: 'facebook', content_category: 'social'}); return false;">
                        <img src="facebook.svg" title="Facebook"/>
                    </a>
                    <a class="social-button"
                       href="https://instagr.am/ratan.band"
                       onclick="getOutboundLink('https://instagr.am/ratan.band'); fbq('track', 'ViewContent', {content_name: 'instagram', content_category: 'social'}); return false;">
                        <img src="instagram.svg" title="Instagram"/>
                    </a>
                    <a class="social-button"
                       href="https://twitter.com/ratan__band"
                       onclick="getOutboundLink('https://twitter.com/ratan__band'); fbq('track', 'ViewContent', {content_name: 'twitter', content_category: 'social'}); return false;">
                        <img src="twitter.svg" title="Twitter"/>
                    </a>
                </div>
                <div id="buttons">
                    <a class="button"
                       href="https://open.spotify.com/album/2K4OlP64i0Y0po6taGzVtc"
                       onclick="getOutboundLink('https://open.spotify.com/album/2K4OlP64i0Y0po6taGzVtc'); fbq('track', 'ViewContent', {content_name: 'spotify', content_category: 'music'}); return false;">
                        <img src="spotify_dark.svg" title="Spotify"/>
    <!--
                        <span style="width: 10px"></span>
                        <iframe src="https://open.spotify.com/follow/1/?uri=spotify:artist:2ZEPuUFJQwkCrux9npgQT4&size=basic&theme=light" width="95" height="25" scrolling="no" frameborder="0" style="border:none; overflow:hidden;" allowtransparency="true"></iframe>
    -->
                    </a>
                    <a class="button"
                       href="https://music.apple.com/us/album/drain/1525722950"
                       onclick="getOutboundLink('https://music.apple.com/us/album/drain/1525722950'); fbq('track', 'ViewContent', {content_name: 'apple_music', content_category: 'music'}); return false;">
                        <img src="apple_music_dark.svg" title="Apple Music"/>
                    </a>
                    <a class="button"
                       href="https://ratan.bandcamp.com"
                       onclick="getOutboundLink('https://ratan.bandcamp.com'); fbq('track', 'ViewContent', {content_name: 'bandcamp', content_category: 'music'}); return false;">
                        <img src="bandcamp_dark.svg" title="Bandcamp"/>
                    </a>
                    <a class="button"
                       href="https://music.youtube.com/playlist?list=OLAK5uy_mRBPcmTSovcmsme3H5e-WlPPygchRS_2c"
                       onclick="getOutboundLink('https://music.youtube.com/playlist?list=OLAK5uy_mRBPcmTSovcmsme3H5e-WlPPygchRS_2c'); fbq('track', 'ViewContent', {content_name: 'youtube_music', content_category: 'music'}); return false;">
                        <img src="youtube_music_dark.svg" title="YouTube Music"/>
                    </a>
                    <a class="button"
                       href="https://youtu.be/zfRGNf262cI?list=OLAK5uy_mWA7f83Hs0PXDXOF0TPXwlf7MJrof96iI"
                       onclick="getOutboundLink('https://youtu.be/zfRGNf262cI?list=OLAK5uy_mWA7f83Hs0PXDXOF0TPXwlf7MJrof96iI'); fbq('track', 'ViewContent', {content_name: 'youtube', content_category: 'music'}); return false;">
                        <img src="youtube_dark.svg" title="YouTube"/>
                    </a>
                    <a class="button"
                       href="https://music.amazon.com/albums/B08DYFGHGJ"
                       onclick="getOutboundLink('https://music.amazon.com/albums/B08DYFGHGJ'); fbq('track', 'ViewContent', {content_name: 'amazon_music', content_category: 'music'}); return false;">
                        <img src="amazon_music_dark.svg" title="Amazon Music"/>
                    </a>
                    <a class="button"
                       href="https://pandora.com/artist/ratan/drain/ALtj55P5vZqmKl9"
                       onclick="getOutboundLink('https://pandora.com/artist/ratan/drain/ALtj55P5vZqmKl9'); fbq('track', 'ViewContent', {content_name: 'pandora', content_category: 'music'}); return false;">
                        <img src="pandora_dark.svg" title="Pandora"/>
                    </a>
                    <a class="button"
                       href="https://www.deezer.com/us/album/164112522"
                       onclick="getOutboundLink('https://www.deezer.com/us/album/164112522'); fbq('track', 'ViewContent', {content_name: 'deezer', content_category: 'music'}); return false;">
                        <img src="deezer_dark.svg" title="Deezer"/>
                    </a>
                    <a class="button"
                       href="https://tidal.com/browse/album/150456926"
                       onclick="getOutboundLink('https://tidal.com/browse/album/150456926'); fbq('track', 'ViewContent', {content_name: 'tidal', content_category: 'music'}); return false;">
                        <img src="tidal_dark.svg" title="Tidal"/>
                    </a>
                    <a class="button"
                       href="https://play.google.com/store/music/album/RATAN_Drain?id=Biolkih3u2jhksmie2dnsqhnmea"
                       onclick="getOutboundLink('https://play.google.com/store/music/album/RATAN_Drain?id=Biolkih3u2jhksmie2dnsqhnmea'); fbq('track', 'ViewContent', {content_name: 'google_play', content_category: 'music'}); return false;">
                        <img src="google_play.svg" title="Google Play"/>
                    </a>
                </div>
            </div>
        </div>
    </body>
</html>
